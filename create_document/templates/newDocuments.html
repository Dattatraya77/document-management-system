{% extends 'layout1.html' %}
{% load static %}
{% load tz %}
{% block content %}

<style>
    .container-fluid {
        padding-right: 15px !important;
        padding-left: 0px !important;
    }

    .dropzone {
        min-height: 250px;
        background: white;
        padding: 25px 54px;
        border: 2px dashed #0087F7;
        border-radius: 5px;
    }

    .dragover {
        border-color: black;
        background-color: whitesmoke;
        box-shadow: inset 0px 0px 15px 0px #5252527d;
    }

    .buttons-html5 {
        padding:1px 6px !important;
    }

    div.scroll {
        margin:4px, 4px;
        padding:4px;
        background-color: steel;
        width: 400px;
        max-height: 125px;
        overflow-x: hidden;
        overflow-y: auto;
        text-align:justify;
    }

    .btn-sm{
        padding:0.25rem 0.5rem;
        line-height:0.5rem;
        border-radius:0rem;
        font-size: 13px;
    }

    .doc_process_success {
        background-color: #d0ffd0;
    }

    .doc_process_delete {
        background-color: #ffcdcd;
    }

    .swal2-popup-custom {
        width: 25em !important;
        padding: 0.25em !important;
        font-size: 0.9rem !important;
    }
    .swal2-icon.swal2-warning {
        border-color: #dc3545 !important;
        color: #dc3545 !important;
    }
    .swal2-styled.swal2-cancel {
        border-radius: 1.25em !important;
        font-size: 1em !important!;
    }
    .swal2-styled.swal2-confirm {
        border-radius: 1.25em !important;
        font-size: 1em !important!;
    }

    .select2-container {
        min-width: 330px;
    }
    .select2-results__options{
        font-size:14px !important;
    }
    .select2-results__placeholders{
        font-size:11px !important;
    }
    .dropdown-menu {
        min-width:15rem;
        padding:0.3rem 2px;
        margin:0.125rem -123px 0px;
        height: 250px;
        overflow: auto;
    }
    sub {
        bottom : 0.1em;
    }
    .round {
        position: relative;
    }
    .round label {
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 50%;
        cursor: pointer;
        height: 20px;
        left: 0;
        position: absolute;
        top: 0;
        width: 20px;
    }
    .round label:after {
        border: 2px solid #fff;
        border-top: none;
        border-right: none;
        content: "";
        height: 5px;
        left: 4px;
        opacity: 0;
        position: absolute;
        top: 5px;
        transform: rotate(-45deg);
        width: 10px;
    }
    .round input[type="checkbox"] {
        visibility: hidden;
    }
    .round input[type="checkbox"]:checked + label {
        background-color: #66bb6a;
        border-color: #66bb6a;
    }
    .round input[type="checkbox"]:checked + label:after {
        opacity: 1;
    }
    @media screen and (max-width: 500px) {
    body{
    font-size:13px !important;
    }
    p{
    font-size:13px !important;
    }
    a{
    font-size:13.5px !important;
    }
    h6{
    font-size:14px !important;
    }
    h5{
    font-size:15px !important;
    }
    .form-check-label{
    font-size:13px !important;
    }
    .btn{
    font-size:14px !important;
    }
   #navbarTogglerDemo01 span{
    display:none;
    }
    #navbarTogglerDemo01{
    padding-left:15% !important;
    padding-right:10% !important;
    margin-left:0px !important;
    }
      #example {
      min-width:77vw !important;
      max-width:78vw !important;
      font-size:13px !important;
      }
      #example tr{
        padding:0px !important;
        margin:0px !important;
      }
      #example td{
        padding:0px !important;
        margin:0px !important;
        display:none;
      }
      #example th{
        padding:0px !important;
        margin:0px !important;
        display:none;
      }
      #example th:nth-child(2){
      display:inline-block !important;
      min-width: 40% !important;
      max-width: 40% !important;
      padding:0px !important;
        margin:0px !important;
        border:0px !important;
      }
      #example th:nth-child(8){
      display:inline-block !important;
      min-width: 50% !important;
      max-width: 50% !important;
      padding:0px !important;
        margin:0px !important;
        border:0px !important;
      }
      #example td:nth-child(2){
      display:inline-block !important;
      word-break:break-all;
      min-width: 40% !important;
      max-width: 40% !important;
      padding:0px !important;
        margin:0px !important;
        border:0px !important;
      }
      #example td:nth-child(8){
      display:inline-block !important;
      min-width: 50% !important;
      max-width: 50% !important;
      padding:0px !important;
        margin:0px !important;
        border:0px !important;
      }
    }
</style>

<div class="container">
    <div class="mx-5 pt-3" id="alert_wrapper"></div>
    <div class="d-flex justify-content-center ">
        <div class="user_card" style="width:85vw;">
            <div class="d-flex justify-content-left mt-5">
                <h5 id="form-title">Update Document List</h5>
             </div><br>
            <div class="d-flex justify-content-center form_container">
                <div class="table-responsive" style="height:700px">
                    <table id="example" class="table table-bordered table-striped" data-order='[[ 5, "desc" ]]'>
                        <thead>
                            <tr align="center">
                                <th>
                                    <input title="Click here to select/unselect all files" type="checkbox" id="selectAllButton">
                                </th>
                                <th>File ID</th>
                                <th>File Name</th>
                                <th>File Groups</th>
                                <th>File Type</th>
                                <th>Created By</th>
                                <th>Updated On</th>
                                <th >Action</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for item in new_document_list %}
                        {% if item.document %}
                        <tr>
                            <td><input title="Click here to select/unselect a file" type="checkbox" id="{{ item.doc_id }}" value="{{ item.doc_id }}" style="margin-left:8px;"></td>
                            <td>{{ item.doc_id }}</td>
                            <td style ="word-break:break-all;">{{ item.get_document_name }}</td>
                            <td>{{ item.display_group }}</td>
                            <td>{% if item.doc_type %}{{ item.doc_type }}{% endif %}</td>
                            <td style ="word-break:break-all;">{{ item.doc_created_by.username }}</td>
                            <td>{{ item.doc_updated_on | timezone:time_zone}}</td>
                            <td align="center">
                                <div class="btn-group dropleft" role="group" aria-label="First group">
                                    {% if item.document %}
                                        <button title="Download created docx" class="btn btn-outline-secondary btn-sm"
                                                onclick="downloadURI('{{ item.document }}','{{ item.doc_id }}')"
                                        {% if permissions.DOWNLOAD == False %}disabled{% endif %}>
                                            <img src="/static/images/ms-word.png" width="20" height="20"/>
                                        </button>
                                    {% else %}
                                        <button title="Download created docx" class="btn btn-outline-secondary btn-sm" disabled>
                                            <img src="/static/images/ms-word.png" width="20" height="20">
                                        </button>
                                    {% endif %}
                                    <button title="More Action" class="btn btn-outline-secondary btn-sm" type="button"
                                            id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" {% if permissions.Extended_Menu == False %}disabled{% endif %}>
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>

                                    <div class="dropdown-menu dropdown-content">
                                        {% if permissions.DELETE == False %}
                                            <a class="dropdown-item disabled" title="Delete Document" href="#">
                                                <i class="fa fa-trash btn-outline-danger"></i><span class="pl-2"><sub>Delete</sub></span>
                                            </a>
                                        {% else %}
                                            <a class="dropdown-item" title="Delete Document" href="" data-toggle="modal" data-target="#{{ item.document }}">
                                                <i class="fa fa-trash btn-outline-danger"></i><span class="pl-2"><sub>Delete</sub></span>
                                            </a>
                                        {% endif %}
                                        <div class="dropdown-divider"></div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                        <div class="modal fade" tabindex="-1" id="{{ item.document }}">
                            <div class="modal-dialog">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h4 class="modal-title">Delete Document</h4>
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: white">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <p>Are you sure you want to delete this document?</p>
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-outline-dark btn-sm" data-dismiss="modal">
                                      <i class="fa fa-times pr-2"></i> Close</button>

                                    <a href="/delete-docx-document/{{ item.doc_id }}"
                                       class="btn btn-outline-danger btn-sm">
                                       <i class="fa fa-trash pr-2"></i> Delete
                                    </a>

                                </div>
                              </div>

                            </div>

                        </div>
                        {% endfor %}
                    </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extracode %}
    <script src="{% static 'custom/js/download_view_document.js' %}?version=7" type="text/javascript"></script>
{% endblock %}

{% block extrajs %}

{% endblock %}