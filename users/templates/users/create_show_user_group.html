{% extends "layout1.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}

<style>
    .container-fluid {
        padding-right: 15px !important;
        padding-left: 0px !important;
    }
    .selector select {
        width : 380px;
        height : 20.8em;
        font-size : smaller;
    }
    .select.form-control[multiple], select.form-control[size] {
        height : auto !important;
    }
    ul.errorlist {
        display:none;
    }
</style>

<body class="" style="background-color: #fafafa;">
    <div class="container">
        <div class="row">
            <div class="col-sm-4 pt-5">
                <h4 class="text-center alert alert-info">
                    Create New Group
                </h4>

                {% if g_form.errors %}
                    {% for field in g_form %}
                        {% for error in field.errors %}
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <strong>{{ error|escape }}</strong>
                            </div>
                        {% endfor %}
                    {% endfor %}
                    {% for error in g_form.non_field_errors %}
                        <div class="alert alert-danger alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <strong>{{ error|escape }}</strong>
                        </div>
                    {% endfor %}
                {% endif %}

                <form method="POST" enctype="multipart/form-data" class="mt-3">
                    {% csrf_token %}
                    <div class="form-group">
                        {{ g_form.as_p }}
                    </div>
                    <div class="form-group">
                        <button class="btn btn-primary btn-block" type="submit">Create</button>
                    </div>
                </form>
            </div>

            <div class="col-sm-8 pt-5">
                <h4 class="text-center alert alert-info">
                    Show Group Information
                </h4>
                <div class="table-responsive">
                    <table id="example" class="table table-bordered table-striped" data-order='[[ 0, "desc" ]]'>
                        <thead>
                            <tr align="center">
                                <th>ID</th>
                                <th>Group Name</th>
                                <th>Action</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for group in groups %}
                                <tr align="center">
                                    <td>{{ group.id }}</td>
                                    <td>{{ group.name }}</td>
                                    <td>
                                        <a href="/update-show-user-group/{{ group.id }}/" class="btn btn-outline-secondary" title="Update User Group">
                                            <img src="/static/images/edit-metadata.png" width="20" height="20"/>
                                        </a>
                                        <button title="Delete User Group" class="btn btn-outline-secondary" data-toggle="modal" data-target="#{{ group.id }}">
                                            <i class="far fa-trash-alt fa-lg"></i>
                                        </button>
                                    </td>
                                </tr>

                                <div class="modal fade" tabindex="-1" id="{{ group.id }}">
                                    <div class="modal-dialog">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <h4 class="modal-title">Delete Group</h4>
                                          <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: white">
                                            <span aria-hidden="true">&times;</span>
                                          </button>
                                        </div>
                                        <div class="modal-body">
                                          <p>Are you sure you want to delete "{{ group.name }}" group?</p>
                                        </div>
                                        <div class="modal-footer">
                                          <button type="button" class="btn btn-outline-dark btn-sm" data-dismiss="modal"> <i class="fa fa-times pr-2"></i> Close</button>

                                            <a href="/delete-show-user-group/{{ group.id }}/" class="btn btn-outline-danger btn-sm">
                                                <i class="fa fa-trash pr-2"></i> Delete
                                            </a>

                                        </div>
                                      </div>

                                    </div>

                                </div>

                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</body>

<script>
    var form_fields = document.getElementById('id_name')
    form_fields.placeholder='Please enter group name here...';
    form_fields.className = ' form-control border-primary'
</script>
{% endblock content %}
