{% extends "layout1.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}

<style>
    .container-fluid {
        padding-right: 15px !important;
        padding-left: 0px !important;
    }
    .select2-container .select2-selection--multiple {
        width : 310px;
        border-color: #007bff;
        min-height : 37px;
    }
    .select.form-control[multiple], select.form-control[size] {
        height : auto !important;
    }
</style>

<body class="" style="background-color: #fafafa;">
    <div class="container">
        <div class="row">
            <div class="col-4">
                <div class="mt-4">
                    <div class="card" style="width: 25rem;">
                        <div class="card-header bg-light text-dark font-weight-bold">
                            <i class="fas fa-key pr-2"></i> Change Password
                        </div>
                        {% if form.errors %}
                            {% for field in form %}
                                {% for error in field.errors %}
                                    <div class="alert alert-danger alert-dismissible" role="alert">
                                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                                        <strong>{{ error|escape }}</strong>
                                    </div>
                                {% endfor %}
                            {% endfor %}
                            {% for error in form.non_field_errors %}
                                <div class="alert alert-danger alert-dismissible" role="alert">
                                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                                    <strong>{{ error|escape }}</strong>
                                </div>
                            {% endfor %}
                        {% endif %}

                        <div class="card-body">
                            <form method="POST" enctype="multipart/form-data" class="mt-3">
                                {% csrf_token %}
                                <div class="form-group">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <span class="fa fa-lock">
                                                </span>
                                            </span>
                                        </div>
                                        {{ form.new_password1 }}
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <span class="fa fa-lock">
                                                </span>
                                            </span>
                                        </div>
                                        {{ form.new_password2 }}
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="input-group">
                                        <div class="row" style="width:100%;display:flex;justify-content:space-between;">
                                            <div class="col">
                                                <div class="row">
                                                    <p style="padding:0px;margin:0px;margin-left:20px;" id="show_hide_password_at_profile_page">Show password</p>
                                                    <input   style="padding:0px;margin:0px;width:13px;height:13px;margin-left:10px;margin-top:7px;" type="checkbox" onclick="show_hide_password_at_profile_page(this)">
                                                </div>
                                            </div>
                                            <div class="col">

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col">
                                            <button title="Click here to add save changes" class="btn btn-primary" type="submit">Save Changes</button>
                                        </div>
                                        <div class="col d-flex justify-content-end">
                                            <a href="{% url 'profile' %}" class="btn btn-secondary" title="Back to profile page">Back</a>
                                        </div>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    //Query All input fields
    var form_fields = document.getElementsByTagName('input')
    form_fields[4].placeholder='Enter Password';
    form_fields[5].placeholder='Confirm Password';

    for (var field in form_fields){
        form_fields[field].className += ' form-control border-primary'
    }
</script>

<script>
function show_hide_password_at_profile_page(cb){
    if(cb.checked){
        document.getElementById("show_hide_password_at_profile_page").innerText="Hide password";
        document.getElementById("id_new_password1").type="text";
        document.getElementById("id_new_password2").type="text";
    }
    else{
        document.getElementById("show_hide_password_at_profile_page").innerText="Show password";
        document.getElementById("id_new_password1").type="password";
        document.getElementById("id_new_password2").type="password";
    }
}
</script>

{% endblock content %}
